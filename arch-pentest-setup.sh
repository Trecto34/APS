#!/bin/bash

# By: @Iann-Zorkot
# Modified By: @Trecto34 
# Description: Script for automatic installation of pentesting tools on Arch Linux
# Usage: # bash ./arch-pentest-setup.sh

# Path to the current directory
MY_DIR=$(pwd)

# Add BlackArch repository
function addBlackArch {
    cd /tmp && curl -O https://blackarch.org/strap.sh && chmod +x strap.sh && sh ./strap.sh
    cd $MY_DIR
}

# Add MultiLib repository
function addMultiLib {
    echo "[multilib]" >> /etc/pacman.conf && echo "Include = /etc/pacman.d/mirrorlist" >> /etc/pacman.conf
}

# Install penetration testing tools
function installTools {
    # Install tools via Pacman
    pacman --noconfirm --disable-download-timeout -S amass wget python-pip nmap sqlmap rustscan feroxbuster burpsuite wireshark-qt nikto hashcat john metasploit tcpdump gnu-netcat hydra waybackurls gau anewer meg qsreplace httprobe assetfinder gf dnsx ffuf gobuster gospider hakrawler httpx metabigor subfinder wafw00f android-apktool secretfinder dalfox nuclei

    # Install FuzzingTool via Pip
    pip3 install FuzzingTool

    # Install SecLists
    mkdir /usr/share/wordlists
    cd /usr/share/wordlists
    git clone https://github.com/danielmiessler/SecLists.git
    cd $MY_DIR
}

# Main function
function main {
    echo " ▄▀▀█▄   ▄▀▀▄▀▀▀▄  ▄▀▀▀▀▄
    ▐ ▄▀ ▀▄ █   █   █ █ █   ▐
    █▄▄▄█ ▐  █▀▀▀▀     ▀▄
    ▄▀   █    █      ▀▄   █
    █   ▄▀ ▄ ▄▀ ▄      █▀▀▀ ▄
    ▐   ▐   █          ▐
    ▐                 "
    echo "By: @Iann-Zorkot"
    echo "Modified By: @Trecto34"
    echo

    read -p "[!] This will take a while, do you want to proceed? [y/N]" answer

    if [[ $answer =~ ^[Yy]$ ]]; then
        if [[ $(id -u) -ne 0 ]]; then
            echo "[!] You need to be root!"
        else
            echo "[+] Adding repositories..."
            addMultiLib
            addBlackArch
            echo "[+] Installing tools..."
            installTools
            echo "[+] Finished =)"
        fi
    else
        echo "[!] Exiting... No installation done."
    fi
}

main
